!function(e){"use strict";theme.HomeBuilder=function(){function t(t){var i=this;this.$container=e(t),this.namespace=".home-builder",this.onLoad(),this.$container.on("section:reload",function(){i.onUnload(),i.onLoad()})}return t.prototype=e.extend({},Section.prototype,t.prototype,{onLoad:function(){var e=this.$container.find(".rev_slider"),t=this.$container.find(".slider"),i=this.$container.find("#instafeed"),n=this.$container.find(".promobox"),a=n.find(".js-parallax");this.initRevolution(e),this.initSlick(t),a.length&&theme.Parallax&&theme.Parallax.init(a),i.length&&this.initInstafeed(i)},initSlick:function(t){var i=this;t.each(function(){var t=e(this),n=t.find("[data-js-slider-slick]"),a=t.find("[data-js-slider-prev]"),o=t.find("[data-js-slider-next]"),s=1e3*+n.attr("data-speed"),l="true"===n.attr("data-arrows"),r="true"===n.attr("data-bullets");i.$slick=n,n.on("init",function(){n.removeClass("invisible"),theme.Loader.unset(n.parent())}),n.slick({lazyLoad:!1,arrows:l,prevArrow:a,nextArrow:o,dots:r,dotsClass:"slick-dots d-none d-lg-flex flex-wrap flex-center position-absolute list-unstyled mt-35",adaptiveHeight:!0,autoplay:!0,autoplaySpeed:s,fade:!0,infinite:!0,slidesToShow:1,slidesToScroll:1,rtl:theme.rtl})})},initRevolution:function(t){var i=this;t.each(function(){var t=e(this),n=t.data("gridwidth").split(","),a=t.data("gridheight").split(","),o=t.data("minheight"),s=t.data("slider-layout"),l=t.data("full-screen-offset-container")||null,r=t.show().revolution({sliderLayout:s,fullScreenOffsetContainer:l,responsiveLevels:[1259,1024,777,540],gridwidth:[+n[0],+n[1],+n[2],+n[3]],gridheight:[+a[0],+a[1],+a[2],+a[3]],minHeight:void 0!==o&&o,visibilityLevels:[1259,1024,777,540],delay:1e3*t.data("delay"),disableProgressBar:"on",lazyType:"single",spinner:"none",navigation:{arrows:{enable:t.data("arrows"),style:"uranus",hide_onleave:!1},bullets:{enable:t.data("bullets"),h_align:"center",v_align:"bottom",h_offset:0,v_offset:74,space:24,hide_onleave:!1,tmp:""},touch:{touchenabled:"on"}},parallax:{type:"mouse",origo:"slidercenter",speed:400,levels:[2,4,6,8,10,12,14,16,18,20,25,30,35,40,45,50],disable_onmobile:"on"}});i.$container.one("section.unload",function(){r.revkill()})})},initInstafeed:function(t){var i=t.find("template");if(i.length&&i[0].content){var n=e(t.find("template")[0].content).children().html(),a=t.data("tag"),o=t.data("limit"),s={},l={240:1,320:2,480:3,640:4},r=t.data("size")||"240";t.html(""),a?s.tag=a:s.username=t.data("username"),e.instagramFeed(e.extend(s,{container:"#instafeed",display_profile:!1,display_biography:!1,display_gallery:!0,styling:!1,items:o,items_per_row:4,margin:.5,get_data:!0,callback:function(e){for(var i=a?e.edge_hashtag_to_media:e.edge_owner_to_timeline_media,s=0;s<Math.min(o,i.edges.length);s++){var d=n.replace(/post-image/g,i.edges[s].node.thumbnail_resources[l[r]].src).replace(/post-link/g,"https://www.instagram.com/p/"+i.edges[s].node.shortcode).replace(/post-comments/g,i.edges[s].node.edge_media_to_comment.count).replace(/post-likes/g,i.edges[s].node.edge_media_preview_like.count);t.html(t.html()+d)}t.removeClass("d-none"),theme.ImagesLazyLoad.update()}}))}},onUnload:function(){this.$container.off(this.namespace),this.$container.trigger("section.unload"),this.$slick&&(this.$slick.slick("destroy").off(),$window.unbind("load.slickResize"),this.$slick=null),theme.Parallax&&theme.Parallax.destroy(this.$container.find(".js-parallax"))}}),t}(),e(function(){theme.sections.register("home-builder",theme.HomeBuilder),theme.sections.register("collection-fullwidth-head",theme.HomeBuilder),theme.sections.register("collection-head",theme.HomeBuilder)})}(jQueryTheme);