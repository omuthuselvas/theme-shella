!function(t){"use strict";theme.Notifications=function(){function i(){this.selectors={elems:".js-notification"},this.settings={close_limit:40,translate_limit:50,opacity_limit:.4},this.load()}i.prototype=t.extend({},i.prototype,{load:function(){var i,n=this;$body.on("mousedown",this.selectors.elems,function(e){if("A"!==e.target.tagName&&!t(e.target).parents("[data-js-action]").length){n.is_holded=!0;var o=t(this),s=e.screenX;return i=0,o.addClass("animate"),setTimeout(function(){o.addClass("pressed")},0),$body.on("mousemove.notification",function(t){var e=t.screenX,a=Math.min(s+n.settings.translate_limit,Math.max(s-n.settings.translate_limit,e));i=a-s,o.removeClass("animate"),setTimeout(function(){o.css({transform:"translateX("+i+"px) scale(0.95)",opacity:Math.max((n.settings.translate_limit-Math.abs(i))/n.settings.translate_limit,n.settings.opacity_limit)})},0),setTimeout(function(){o.addClass("animate")},0)}),$body.one("mouseup.notification",function(){o.trigger("mouseup")}),e.preventDefault(),!1}}),$body.on("mouseup",this.selectors.elems,function(){var e=t(this);n.is_holded=!1,$body.unbind("mousemove.notification mouseup.notification"),setTimeout(function(){if(Math.abs(i)>n.settings.close_limit){var t=e.find("[data-js-notification-inner]"),o=t.find('[data-js-action="close"]').first();if(t.hasClass("d-none"))return;e.one("transitionend",function(){i=0,e.trigger("mouseup").trigger("transitionend"),o.trigger("click"),t.trigger("transitionend"),e.trigger("onpressedend")}),e.css({transform:"translateX("+(i+20)+"px) scale(0.95)",opacity:0})}else e.removeClass("pressed"),e.one("transitionend",function(){e.removeClass("animate"),e.trigger("onpressedend")}),e.css({transform:"",opacity:""});"0s"===e.css("transition-duration")&&e.trigger("transitionend")},0)}),$body.on("close",this.selectors.elems,function(){var i=t(this);$body.unbind("mousemove.notification"),i.trigger("mouseup").trigger("transitionend")}),this._products(),this._cookies()},_cookies:function(){var i=this,n=t(".js-notification-cookies");if(n.length){var e=n.find('[data-js-action="close"]'),o=t.cookie("notification-cookies"),s=n.attr("data-js-show-once"),a=+n.attr("data-js-delay"),r=+n.attr("data-js-cookies-life");return"off"!==o&&setTimeout(function(){i._show(n,function(){e.one("click",function(){if("true"===s){var e=new Date,o=864e5*r;e.setTime(e.getTime()+o),t.cookie("notification-cookies","off",{expires:e,path:"/"})}i._hide(n,function(){n.remove()}),t(this).off()})})},1e3*a),e}},_products:function(){function i(t,i){return Math.round(t-.5+Math.random()*(i-t+1))}function n(){o._hide(s,function(){e()})}function e(){clearInterval(c),!s.hasClass("d-none")||o.is_holded?o.is_holded?s.parents(".js-notification").one("onpressedend",function(){n()}):s.is(":hover")?s.one("mouseleave",function(){n()}):n():(a=f.eq(i(0,f.length-1)),r=i(m,h),f.addClass("d-none"),a.removeClass("d-none"),o._show(s,function(){d=setTimeout(function(){e()},1e3*r),0!==g&&(c=setTimeout(function(){o._hide(s)},1e3*g))},function(t){t()}))}var o=this,s=t(".js-notification-products");if(s.length){var a,r,c,d,u=s.find('[data-js-action="close"]'),f=s.find("[data-js-notification-products-item]"),l=+s.attr("data-js-delay"),m=+s.attr("data-js-interval-min"),h=+s.attr("data-js-interval-max"),g=+s.attr("data-js-max-time-life");return setTimeout(function(){e()},1e3*l),u.on("click",function(){clearTimeout(d),o._hide(s)}),u}},_show:function(t,i,n){function e(){setTimeout(function(){t.addClass("visible")},0),"0s"===t.css("transition-duration")&&t.trigger("transitionend")}t.unbind("transitionend"),i&&t.one("transitionend",function(){i()}),t.removeClass("d-none"),t.addClass("animate"),n?n(e):e()},_hide:function(t,i){t.unbind("transitionend"),t.one("transitionend",function(){t.addClass("d-none").removeClass("animate").removeAttr("style"),t.parents(".js-notification").trigger("close"),i&&i()}),t.removeClass("visible"),"0s"===t.css("transition-duration")&&t.trigger("transitionend")},destroy:function(){t(".js-notification-cookies, .js-notification-products").find('[data-js-action="close"]').off()}}),theme.Notifications=new i},t(function(){theme.Notifications()})}(jQueryTheme);