!function(t){"use strict";theme.StickyHeader=function(){function e(){}e.prototype=t.extend({},e.prototype,{init:function(e,i){e.attr("data-sticky-effect")||1;if(e.length){var s={_create:function(){function e(){o._fix(o.$sticky,o.$spacer),o._move(o.options[o.bp]),$window.trigger("verticalmenu.checkheight")}function i(){o._unfix(o.$sticky,o.$spacer),o._return(o.options[o.bp]),$window.trigger("verticalmenu.checkheight")}function s(){var t=theme.current.is_desktop;o.bp=t?"desktop":"mobile",o.$sticky=t?h:r,o.$spacer=t?p:a,o.$sticky.length&&(t?(a.removeClass("header__spacer--visible"),p.addClass("header__spacer--visible"),r.hasClass(o.sticky_class)&&(o._unfix(r,a),o._return(o.options.mobile))):(p.removeClass("header__spacer--visible"),a.addClass("header__spacer--visible"),h.hasClass(o.sticky_class)&&(o._unfix(h,p),o._return(o.options.desktop))))}function n(){if(o.$sticky.length){var t=o.options[o.bp].limit?o.options[o.bp].limit:0,s=o.$spacer[0].getBoundingClientRect();"bottom"===t&&(t=o.$sticky.hasClass(o.sticky_class)?o.$spacer.innerHeight():o.$sticky.innerHeight()),t*=-1,s.top<t?(o.$sticky.hasClass(o.sticky_class)||e(),ie||o._check_height(o.$sticky,o.options[o.bp])):o.$sticky.hasClass(o.sticky_class)&&i()}}var o=this,c=this.bindings,r=c.find(this.options.mobile&&this.options.mobile.sticky?this.options.mobile.sticky:""),h=c.find(this.options.desktop&&this.options.desktop.sticky?this.options.desktop.sticky:""),a=t("<div>").addClass("header__spacer header__spacer--m").insertBefore(r),p=t("<div>").addClass("header__spacer header__spacer--d").insertBefore(h);this.sticky_class="header__content--sticky",s(),n(),theme.current.is_desktop&&theme.VerticalMenu&&theme.VerticalMenu.checkHeightVerticalMenu&&setTimeout(function(){$window.trigger("verticalmenu.checkheight")},50),$window.on({"theme.resize.stickyHeader":function(){s(),n()},"scroll.stickyHeader":n})},_fix:function(t,e){var i=t.innerHeight();e.height(i),this.options[this.bp].fade&&t.css({opacity:0}).velocity({opacity:theme.animations.sticky_header.opacity},this.options[this.bp].duration()),t.addClass(this.sticky_class)},_unfix:function(t,e){e.removeAttr("style"),this.options[this.bp].fade&&t.velocity("stop",!0),t.removeAttr("style").removeClass(this.sticky_class)},_move:function(e){e.move&&t.each(e.move,function(){var e=t(this.elem),i=t(this.to),s=this.method||"append";this.$elem=e,this.$parent=e.parent(),i[s](e)})},_return:function(e){e.move&&t.each(e.move,function(){var t=this.method||"append";this.$parent[t](this.$elem),this.$elem=null,this.$parent=null})},_check_height:function(t,e){if(e.height){var i=this.$spacer[0].getBoundingClientRect(),s=i.bottom<=e.height?e.height:i.bottom;t.css({"min-height":s})}},getStickyHeight:function(){return this.options[this.bp]?this.options[this.bp].height||t(this.options[this.bp].sticky).innerHeight():0},destroy:function(){t(window).unbind("resize.stickyHeader scroll.stickyHeader"),t.Widget.prototype.destroy.call(this)}};return t.widget("ui.stickyHeader",s),e.stickyHeader(i),this.$sticky=e,{destroy:function(){e.stickyHeader("destroy")}}}}}),theme.StickyHeader=new e},t(function(){theme.StickyHeader()})}(jQueryTheme);