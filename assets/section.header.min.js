!function(t){"use strict";theme.Header=function(){function e(e){this.$container=t(e),this.namespace=".header",this.onLoad()}var i={menu:".js-menu",vertical_menu:".js-vertical-menu"};return e.prototype=t.extend({},Section.prototype,e.prototype,{_tape:function(){var e=this.$container.find(".js-header-tape"),i=function(){return 1e3*theme.animations.header_tape.duration};if(e.length){var a=e.find('[data-js-action="close"]'),n=t.cookie("header-tape"),r=e.attr("data-js-show-once"),s=+e.attr("data-js-delay"),d=+e.attr("data-js-cookies-life");"off"!==n&&(setTimeout(function(){e.removeClass("d-none"),e.velocity("slideDown",{duration:i(),complete:function(){e.removeAttr("style"),$window.trigger("fullscreenimage.update")}})},1e3*s),a.on("click",function(){if("true"===r){var a=new Date,n=864e5*d;a.setTime(a.getTime()+n),t.cookie("header-tape","off",{expires:a,path:"/"})}t(this).off(),e.velocity("slideUp",{duration:i(),complete:function(){e.remove()}})})),this._registerHansler(a)}},_menu:{init:function(e){var a=t(i.menu),n=t(i.vertical_menu);a.length&&(this.$menu=a.first(),theme.Menu=new theme.MenuBuilder(this.$menu,{namespace:e})),n.length&&(this.$vertical_menu=n.first(),theme.VerticalMenu=new theme.MenuBuilder(this.$vertical_menu,{namespace:e}))},destroy:function(){this.api&&(this.$menu.unbind("mouseenter"),this.api.destroy(),this.api=null),this.vertical_api&&(this.$vertical_menu.unbind("mouseenter"),this.vertical_api.destroy(),this.vertical_api=null),this.handler&&this.handler.destroy()}},_sticky:{init:function(){var e=t(".js-header-sticky"),i=e.attr("data-js-sticky"),a=e.attr("data-js-desktop-sticky-sidebar");if(e.length){var n={bp:1024};"desktop_and_mobile"!==i&&"desktop"!==i||(t.extend(n,{desktop:{sticky:"[data-js-desktop-sticky]",limit:"bottom",fade:!0,duration:function(){return 1e3*theme.animations.sticky_header.duration}}}),"true"===a&&t.extend(n.desktop,{move:[{elem:'[data-js-sticky-replace-element="logo"]',to:'[data-js-sticky-replace-here="logo"]'},{elem:'[data-js-sticky-replace-element="cart"]',to:'[data-js-sticky-replace-here="cart"]'},{elem:'[data-js-sticky-replace-element="wishlist"]',to:'[data-js-sticky-replace-here="wishlist"]'},{elem:'[data-js-sticky-replace-element="compare"]',to:'[data-js-sticky-replace-here="compare"]'}]})),"desktop_and_mobile"!==i&&"mobile"!==i||t.extend(n,{mobile:{sticky:"[data-js-mobile-sticky]",limit:"bottom",fade:!1}}),theme.StickyHeader&&(this.api=theme.StickyHeader.init(e,n))}},destroy:function(){this.api&&(this.api.destroy(),this.api=null)}},_languages:{init:function(){function e(){var e=s.find("a").html(),i=t("<span>").html(e),a=t("<li>").addClass("active").attr("data-l",s.attr("data-l")).append(i);o.html(e),c.html("").append(a),d.find("li").each(function(){var e=t(this),i=t("<span>").html(e.find("a").html()),a=t("<li>").attr("data-l",e.attr("data-l")).append(i);c.append(a)})}function i(){var t=s.attr("data-l"),e=s.find("a").html();o.html(e),c.find("li").removeClass("active").filter('[data-l="'+t+'"]').addClass("active")}var a=this,n=t(".js-languages-list"),r=t(".weglot-container").eq(0);if(n.length&&r.length){var s=r.find(".wgcurrent"),d=r.find("ul"),o=n.find(".header__btn-language span"),c=n.find("ul");a.$header_list=c,e(),n.removeClass("d-none-important"),c.on("click","li:not(.active)",function(){var e=t(this);d.find('li[data-l="'+e.attr("data-l")+'"] a').trigger("click"),i(),e.parents("[data-js-dropdown]").trigger("hide")})}else r.length&&(r.find("ul").addClass("list-unstyled"),r.addClass("show"))},destroy:function(){this.api&&(this.api.destroy(),this.api=null),this.$header_list&&this.$header_list.off()}},_currency:{init:function(e){function i(e){var i;return a.find("li").each(function(){var a=t(this);a.data("currency-code")==e?(a.addClass("active"),i=a.attr("data-button-name")||e):a.removeClass("active")}),i}var a=t(".js-currencies-list"),n=t(".js-currencies-form");if(a.length&&theme.ProductCurrency){var r,e=e+".currencies",s=a.find("[data-current-currency]");try{r=Currency.cookie.read()}catch(t){}if(null!=r&&r!==Currency.shopCurrency){var d=i(r);s.html(d)}a.on("click"+e,"li",function(e){var a=t(this);if(!a.hasClass("active")){var n=a.data("currency-code"),r=a.attr("data-button-name")||n;theme.ProductCurrency.setCurrency(n),i(n),s.html(r),theme.current.is_desktop?a.parents("[data-js-dropdown]").trigger("hide"):theme.Popups.closeByName("navigation")}return e.preventDefault(),!1}),this.api={destroy:function(){$body.unbind("click"+e)}}}else n.length&&n.find("select").on("change",function(){t(this).parents("form").submit()})},destroy:function(){this.api&&(this.api.destroy(),this.api=null)}},_widthLimit:{init:function(e,i){var a=e.find("[data-js-width-limit]");a.length&&(this.handlerWidthLimit=theme.Global.responsiveHandler({namespace:i,element:$window,on_desktop:!0,onbindtrigger:"header.widthlimit",events:{"load.widthlimit theme.resize.widthlimit header.widthlimit":function(i){theme.current.is_desktop&&a.each(function(){var i=t(this),a=i[0].getBoundingClientRect(),n=i.attr("data-js-width-limit"),r=+i.attr("data-js-width-limit-margin")||0,s=e.find('[data-js-width-limit-edge="'+n+'"]').first(),d=s[0].getBoundingClientRect();theme.rtl?i.css({"max-width":theme.current.width-theme.current.scroll_w-(theme.current.width-theme.current.scroll_w-a.right)-d.right-r+"px"}):i.css({"max-width":theme.current.width-theme.current.scroll_w-a.left-(theme.current.width-theme.current.scroll_w-d.left)-r+"px"}),i.removeClass("invisible-lg")})}}}))},destroy:function(){this.handlerWidthLimit&&this.handlerWidthLimit.unbind()}},onLoad:function(){theme.is_loaded&&(theme.Position.update("menu"),theme.Position.update("currency")),theme.StoreLists.updateHeaderCount(),this._widthLimit.init(this.$container,this.namespace),this._menu.init(this.namespace),this._sticky.init(),this._tape(),this._languages.init(),this._currency.init(this.namespace)},onUnload:function(){this.$container.off(this.namespace),this._offHanslers(),this._widthLimit.destroy(),this._menu.destroy(),this._sticky.destroy(),this._languages.init(),this._currency.destroy()}}),e}(),t(function(){theme.sections.register("header",theme.Header)})}(jQueryTheme);