!function(t){"use strict";theme.ProductsView=function(){function e(){this.selectors={view:".js-products-view"},this.init()}e.prototype=t.extend({},e.prototype,{init:function(){var e=this,a=localStorage.getItem("products-view");if(window.location.href.indexOf("products-view=reset")!==-1&&(a=null,localStorage.setItem("products-view",null)),a){var s=t(this.selectors.view+" [data-js-products-grid-buttons]");a=JSON.parse(a),s.each(function(){var s=t(this),r=!0;t.each(a,function(t,e){if(s.attr("data-value-"+t)!==e){var a="data-active-"+t;s.attr("data-value-"+t,e),s.find("[data-value]").removeAttr(a),s.find('[data-value="'+e+'"]').attr(a,!0),r=!1}}),r||e.update(s)})}$body.on("click",this.selectors.view+" [data-js-products-grid-buttons] [data-value]",function(){var a=t(this),s=a.parents("[data-js-products-grid-buttons]"),r=a.attr("data-value"),i=theme.current.bp,o="data-active-"+i;if(console.log(o),!a[0].hasAttribute(o)){var d={};s.find("[data-value]").removeAttr(o),a.attr(o,!0),s.attr("data-value-"+i,r),e.update(s),t.each(theme.breakpoints.values,function(t,e){d[t]=s.attr("data-value-"+t)}),localStorage.setItem("products-view",JSON.stringify(d))}})},update:function(e){var a=e.parents(this.selectors.view).find("[data-js-products]"),s=t("[data-js-products-grid-buttons]"),r="";s.length&&(t.each(theme.breakpoints.values,function(t){var e=s.attr("data-value-"+t),i="list"===e?12:12/+e;a[1===+e?"addClass":"removeClass"]("products-view-centered-"+t),a["list"===e?"addClass":"removeClass"]("products-view-list-"+t),r+=" col-","xs"!==t&&(r+=t+"-"),r+=i}),a.find("[data-js-product]").parent().attr("class",r),$window.trigger("checkImages"))}}),theme.ProductsView=new e},t(function(){theme.ProductsView()})}(jQueryTheme);